{# templates/shipping_rates/form.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Shipping Rates from The Lands Between{% endblock %}

{% block body %}

    <style>
        .form-group {
            max-width: 600px;
        }

        .form-control {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
        }

        label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        input.form-control {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

    </style>

    <div class="form-group">
        <div class="form-group">
            <h1>Welcome to the Lands Between Shipping Rates Service</h1>
            <p>Click on the map below to select your origin and destination.</p>

            {{ form_start(form, { 'action': path('app_shipping_get_rates') }) }}

            <div class="form-control">
                {{ form_label(form.origin) }}
                {{ form_widget(form.origin) }}
                {{ form_errors(form.origin) }}
            </div>

            <div class="form-control">
                {{ form_label(form.destination) }}
                {{ form_widget(form.destination) }}
                {{ form_errors(form.destination) }}
            </div>

            <div class="form-control">
                {{ form_label(form.weight) }}
                {{ form_widget(form.weight) }}
                {{ form_errors(form.weight) }}
            </div>

            <div class="form-control">
                {{ form_label(form.dimensions) }}
                {{ form_widget(form.dimensions) }}
                {{ form_errors(form.dimensions) }}
            </div>

            {{ form_end(form) }}
        </div>
    </div>

    <h3>Select your Origin and Destination on the map:</h3>
    <div>
        <!-- Image Map Generated by http://www.image-map.net/ -->
        <img src="{{ asset('images/lands-between-map.jpg') }}" usemap="#landsmap" alt="Lands Between Map">

        <map name="landsmap">
            <area onclick="setLocation(event, 1)" alt="Limgrave" title="Limgrave" href="#" coords="376,709,357,685,357,631,390,625,468,617,515,617,560,652,572,720,564,780,444,738,417,729" shape="poly">
            <area onclick="setLocation(event, 3)" alt="Caelid" title="3_caelid" href="#" coords="511,610,570,676,621,730,750,738,789,691,791,632,779,564,740,509,674,498,566,556" shape="poly">
            <area onclick="setLocation(event, 2)" alt="Weeping Peninsula" title="Weeping Peninsula" href="#" coords="453,740,384,771,383,817,459,875,500,852,546,809,541,773" shape="poly">
            <area onclick="setLocation(event, 7)" alt="Liurnia of the Lakes" title="Liurnia of the Lakes" href="" coords="372,411,242,320,179,321,144,374,116,479,130,638,344,669,360,622,385,620,417,500" shape="poly">
            <area onclick="setLocation(event, 4)" alt="Altus Plateau" title="Altus Plateau" href="#" coords="248,321,341,385,413,367,422,320,438,298,477,276,428,229,362,243,363,269,335,275,298,259,291,292" shape="poly">
            <area onclick="setLocation(event, 6)" alt="Mt. Gelmir" title="Mt. Gelmir" href="#" coords="201,302,247,319,290,287,301,249,281,224,210,257" shape="poly">
            <area onclick="setLocation(event, 5)" alt="Leyndell, Royal Capital" title="Leyndell, Royal Capital" href="" coords="582,442,609,375,548,346,542,298,515,271,476,274,445,286,427,303,416,362,457,373,471,368,516,413" shape="poly">
            <area onclick="setLocation(event, 14)" alt="Faram Azula" title="Faram Azula" href="#" coords="1009,440,47" shape="circle">
            <area onclick="setLocation(event, 11)" alt="Consecrated Snowfield" title="Consecrated Snowfield" href="#" coords="558,188,575,210,577,235,630,274,662,317,778,336,788,297,757,243,815,225,815,182,778,161,712,154,674,176,619,172,609,159,583,156" shape="poly">
        </map>
    </div>

    <script>
    let formStep = 'origin';

function setLocation(event, location) {

    if (!location) {
        return;
    }

    event.preventDefault();

    if (formStep === 'origin') {
        document.getElementById("shipping_rate_origin").value = location;
        formStep = 'destination';
    } else if (formStep === 'destination') {
        document.getElementById("shipping_rate_destination").value = location;
        formStep = 'origin'; 
    }
}
</script>
{% endblock %}
